# 7.4.2. Flow Mappings

*Flow mappings* are denoted by surrounding " `{` " and " `}` " characters.

```
[140] c-flow-mapping(n,c) ::=
  c-mapping-start       # '{'
  s-separate(n,c)?
  ns-s-flow-map-entries(n,in-flow(c))?
  c-mapping-end         # '}'
```

Mapping entries are separated by a "`,`" character.

```
[141] ns-s-flow-map-entries(n,c) ::=
  ns-flow-map-entry(n,c)
  s-separate(n,c)?
  (
    c-collect-entry     # ','
    s-separate(n,c)?
    ns-s-flow-map-entries(n,c)?
  )?
```

**Example 7.15 Flow Mappings**

| ``` - { one : two , three: four , } - {five: six,seven : eight} ``` | ```json [ { "one": "two",     "three": "four" },   { "five": "six",     "seven": "eight" } ] ``` |
| --- | --- |

**Legend:**

- `[c-mapping-start](https://yaml.org/spec/1.2.2/#rule-c-mapping-start) [c-mapping-end](https://yaml.org/spec/1.2.2/#rule-c-mapping-end)`
- `[ns-flow-map-entry(n,c)](https://yaml.org/spec/1.2.2/#rule-ns-flow-map-entry)`

If the optional "`?`" mapping key indicator is specified, the rest of the entry may be [completely empty](https://yaml.org/spec/1.2.2/#example-empty-content).

```
[142] ns-flow-map-entry(n,c) ::=
    (
      c-mapping-key    # '?' (not followed by non-ws char)
      s-separate(n,c)
      ns-flow-map-explicit-entry(n,c)
    )
  | ns-flow-map-implicit-entry(n,c)
```
```
[143] ns-flow-map-explicit-entry(n,c) ::=
    ns-flow-map-implicit-entry(n,c)
  | (
      e-node    # ""
      e-node    # ""
    )
```

**Example 7.16 Flow Mapping Entries**

| ``` { ? explicit: entry, implicit: entry, ?°° } ``` | ```json { "explicit": "entry",   "implicit": "entry",   null: null } ``` |
| --- | --- |

**Legend:**

- `[ns-flow-map-explicit-entry(n,c)](https://yaml.org/spec/1.2.2/#rule-ns-flow-map-explicit-entry)`
- `[ns-flow-map-implicit-entry(n,c)](https://yaml.org/spec/1.2.2/#rule-ns-flow-map-implicit-entry)`
- `[e-node](https://yaml.org/spec/1.2.2/#rule-e-node)`

Normally, YAML insists the "`:`" mapping value indicator be [separated](https://yaml.org/spec/1.2.2/#separation-spaces) from the [value](https://yaml.org/spec/1.2.2/#nodes) by [white space](https://yaml.org/spec/1.2.2/#white-space-characters). A benefit of this restriction is that the "`:`" character can be used inside [plain scalars](https://yaml.org/spec/1.2.2/#plain-style), as long as it is not followed by [white space](https://yaml.org/spec/1.2.2/#white-space-characters). This allows for unquoted URLs and timestamps. It is also a potential source for confusion as " `a:1` " is a [plain scalar](https://yaml.org/spec/1.2.2/#plain-style) and not a [key/value pair](https://yaml.org/spec/1.2.2/#mapping).

Note that the [value](https://yaml.org/spec/1.2.2/#nodes) may be [completely empty](https://yaml.org/spec/1.2.2/#example-empty-content) since its existence is indicated by the "`:`".

```
[144] ns-flow-map-implicit-entry(n,c) ::=
    ns-flow-map-yaml-key-entry(n,c)
  | c-ns-flow-map-empty-key-entry(n,c)
  | c-ns-flow-map-json-key-entry(n,c)
```
```
[145] ns-flow-map-yaml-key-entry(n,c) ::=
  ns-flow-yaml-node(n,c)
  (
      (
        s-separate(n,c)?
        c-ns-flow-map-separate-value(n,c)
      )
    | e-node    # ""
  )
```
```
[146] c-ns-flow-map-empty-key-entry(n,c) ::=
  e-node    # ""
  c-ns-flow-map-separate-value(n,c)
```
```
[147] c-ns-flow-map-separate-value(n,c) ::=
  c-mapping-value    # ':'
  [ lookahead ≠ ns-plain-safe(c) ]
  (
      (
        s-separate(n,c)
        ns-flow-node(n,c)
      )
    | e-node    # ""
  )
```

**Example 7.17 Flow Mapping Separate Values**

| ``` { unquoted·:·"separate", https://foo.com, omitted value:°, °:·omitted key, } ``` | ```json { "unquoted": "separate",   "http://foo.com": null,   "omitted value": null,   null: "omitted key" } ``` |
| --- | --- |

**Legend:**

- `[ns-flow-yaml-node(n,c)](https://yaml.org/spec/1.2.2/#rule-ns-flow-yaml-node)`
- `[e-node](https://yaml.org/spec/1.2.2/#rule-e-node)`
- `[c-ns-flow-map-separate-value(n,c)](https://yaml.org/spec/1.2.2/#rule-c-ns-flow-map-separate-value)`

To ensure [JSON compatibility](https://yaml.org/spec/1.2.2/#yaml-directives), if a [key](https://yaml.org/spec/1.2.2/#nodes) inside a flow mapping is [JSON-like](https://yaml.org/spec/1.2.2/#flow-nodes), YAML allows the following [value](https://yaml.org/spec/1.2.2/#nodes) to be specified adjacent to the "`:`". This causes no ambiguity, as all [JSON-like](https://yaml.org/spec/1.2.2/#flow-nodes) [keys](https://yaml.org/spec/1.2.2/#nodes) are surrounded by [indicators](https://yaml.org/spec/1.2.2/#indicator-characters). However, as this greatly reduces readability, YAML [processors](https://yaml.org/spec/1.2.2/#processes-and-models) should [separate](https://yaml.org/spec/1.2.2/#separation-spaces) the [value](https://yaml.org/spec/1.2.2/#nodes) from the "`:`" on output, even in this case.

```
[148] c-ns-flow-map-json-key-entry(n,c) ::=
  c-flow-json-node(n,c)
  (
      (
        s-separate(n,c)?
        c-ns-flow-map-adjacent-value(n,c)
      )
    | e-node    # ""
  )
```
```
[149] c-ns-flow-map-adjacent-value(n,c) ::=
  c-mapping-value          # ':'
  (
      (
        s-separate(n,c)?
        ns-flow-node(n,c)
      )
    | e-node    # ""
  )
```

A more compact notation is usable inside [flow sequences](https://yaml.org/spec/1.2.2/#flow-sequences), if the [mapping](https://yaml.org/spec/1.2.2/#mapping) contains a *single key/value pair*. This notation does not require the surrounding " `{` " and " `}` " characters. Note that it is not possible to specify any [node properties](https://yaml.org/spec/1.2.2/#node-properties) for the [mapping](https://yaml.org/spec/1.2.2/#mapping) in this case.

**Example 7.19 Single Pair Flow Mappings**

| ``` [ foo: bar ] ``` | ```json [ { "foo": "bar" } ] ``` |
| --- | --- |

**Legend:**

- `[ns-flow-pair(n,c)](https://yaml.org/spec/1.2.2/#rule-ns-flow-pair)`

If the "`?`" indicator is explicitly specified, [parsing](https://yaml.org/spec/1.2.2/#parsing-the-presentation-stream) is unambiguous and the syntax is identical to the general case.

```
[150] ns-flow-pair(n,c) ::=
    (
      c-mapping-key     # '?' (not followed by non-ws char)
      s-separate(n,c)
      ns-flow-map-explicit-entry(n,c)
    )
  | ns-flow-pair-entry(n,c)
```

**Example 7.20 Single Pair Explicit Entry**

| ``` [ ? foo  bar : baz ] ``` | ```json [ { "foo bar": "baz" } ] ``` |
| --- | --- |

**Legend:**

- `[ns-flow-map-explicit-entry(n,c)](https://yaml.org/spec/1.2.2/#rule-ns-flow-map-explicit-entry)`

If the "`?`" indicator is omitted, [parsing](https://yaml.org/spec/1.2.2/#parsing-the-presentation-stream) needs to see past the *implicit key* to recognize it as such. To limit the amount of lookahead required, the "`:`" indicator must appear at most 1024 Unicode characters beyond the start of the [key](https://yaml.org/spec/1.2.2/#nodes). In addition, the [key](https://yaml.org/spec/1.2.2/#nodes) is restricted to a single line.

Note that YAML allows arbitrary [nodes](https://yaml.org/spec/1.2.2/#nodes) to be used as [keys](https://yaml.org/spec/1.2.2/#nodes). In particular, a [key](https://yaml.org/spec/1.2.2/#nodes) may be a [sequence](https://yaml.org/spec/1.2.2/#sequence) or a [mapping](https://yaml.org/spec/1.2.2/#mapping). Thus, without the above restrictions, practical one-pass [parsing](https://yaml.org/spec/1.2.2/#parsing-the-presentation-stream) would have been impossible to implement.