# 3.2.1.3. Node Comparison

Since YAML [mappings](https://yaml.org/spec/1.2.2/#mapping) require [key](https://yaml.org/spec/1.2.2/#nodes) uniqueness, [representations](https://yaml.org/spec/1.2.2/#representation-graph) must include a mechanism for testing the equality of [nodes](https://yaml.org/spec/1.2.2/#nodes). This is non-trivial since YAML allows various ways to [format scalar content](https://yaml.org/spec/1.2.2/#scalar-formats). For example, the integer eleven can be written as "`0o13`" (octal) or "`0xB`" (hexadecimal). If both notations are used as [keys](https://yaml.org/spec/1.2.2/#nodes) in the same [mapping](https://yaml.org/spec/1.2.2/#mapping), only a YAML [processor](https://yaml.org/spec/1.2.2/#processes-and-models) which recognizes integer [formats](https://yaml.org/spec/1.2.2/#scalar-formats) would correctly flag the duplicate [key](https://yaml.org/spec/1.2.2/#nodes) as an error.

## Canonical Form

YAML supports the need for [scalar](https://yaml.org/spec/1.2.2/#scalar) equality by requiring that every [scalar](https://yaml.org/spec/1.2.2/#scalar) [tag](https://yaml.org/spec/1.2.2/#tags) must specify a mechanism for producing the *canonical form* of any [formatted content](https://yaml.org/spec/1.2.2/#scalar-formats). This form is a Unicode character string which also [presents](https://yaml.org/spec/1.2.2/#presenting-the-serialization-tree) the same [content](https://yaml.org/spec/1.2.2/#nodes) and can be used for equality testing.

## Equality

Two [nodes](https://yaml.org/spec/1.2.2/#nodes) must have the same [tag](https://yaml.org/spec/1.2.2/#tags) and [content](https://yaml.org/spec/1.2.2/#nodes) to be *equal*. Since each [tag](https://yaml.org/spec/1.2.2/#tags) applies to exactly one [kind](https://yaml.org/spec/1.2.2/#nodes), this implies that the two [nodes](https://yaml.org/spec/1.2.2/#nodes) must have the same [kind](https://yaml.org/spec/1.2.2/#nodes) to be equal.

Two [scalars](https://yaml.org/spec/1.2.2/#scalars) are equal only when their [tags](https://yaml.org/spec/1.2.2/#tags) and canonical forms are equal character-by-character. Equality of [collections](https://yaml.org/spec/1.2.2/#collections) is defined recursively.

Two [sequences](https://yaml.org/spec/1.2.2/#sequence) are equal only when they have the same [tag](https://yaml.org/spec/1.2.2/#tags) and length and each [node](https://yaml.org/spec/1.2.2/#nodes) in one [sequence](https://yaml.org/spec/1.2.2/#sequence) is equal to the corresponding [node](https://yaml.org/spec/1.2.2/#nodes) in the other [sequence](https://yaml.org/spec/1.2.2/#sequence).

Two [mappings](https://yaml.org/spec/1.2.2/#mapping) are equal only when they have the same [tag](https://yaml.org/spec/1.2.2/#tags) and an equal set of [keys](https://yaml.org/spec/1.2.2/#nodes) and each [key](https://yaml.org/spec/1.2.2/#nodes) in this set is associated with equal [values](https://yaml.org/spec/1.2.2/#nodes) in both [mappings](https://yaml.org/spec/1.2.2/#mapping).

Different URI schemes may define different rules for testing the equality of URIs. Since a YAML [processor](https://yaml.org/spec/1.2.2/#processes-and-models) cannot be reasonably expected to be aware of them all, it must resort to a simple character-by-character comparison of [tags](https://yaml.org/spec/1.2.2/#tags) to ensure consistency. This also happens to be the comparison method defined by the "`tag:`" URI scheme. [Tags](https://yaml.org/spec/1.2.2/#tags) in a YAML stream must therefore be [presented](https://yaml.org/spec/1.2.2/#presenting-the-serialization-tree) in a canonical way so that such comparison would yield the correct results.

If a node has itself as a descendant (via an alias), then determining the equality of that node is implementation-defined.

A YAML [processor](https://yaml.org/spec/1.2.2/#processes-and-models) may treat equal [scalars](https://yaml.org/spec/1.2.2/#scalars) as if they were identical.

## Uniqueness

A [mapping's](https://yaml.org/spec/1.2.2/#mapping) [keys](https://yaml.org/spec/1.2.2/#nodes) are *unique* if no two keys are equal to each other. Obviously, identical nodes are always considered equal.