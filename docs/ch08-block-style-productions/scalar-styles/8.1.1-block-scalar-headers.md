# 8.1.1. Block Scalar Headers

[Block scalars](https://yaml.org/spec/1.2.2/#block-scalar-styles) are controlled by a few [indicators](https://yaml.org/spec/1.2.2/#indicator-characters) given in a *header* preceding the [content](https://yaml.org/spec/1.2.2/#nodes) itself. This header is followed by a non-content [line break](https://yaml.org/spec/1.2.2/#line-break-characters) with an optional [comment](https://yaml.org/spec/1.2.2/#comments). This is the only case where a [comment](https://yaml.org/spec/1.2.2/#comments) must not be followed by additional [comment](https://yaml.org/spec/1.2.2/#comments) lines.

> Note: See [Production Parameters](https://yaml.org/spec/1.2.2/#production-parameters) for the definition of the `t` variable.

```
[162] c-b-block-header(t) ::=
  (
      (
        c-indentation-indicator
        c-chomping-indicator(t)
      )
    | (
        c-chomping-indicator(t)
        c-indentation-indicator
      )
  )
  s-b-comment
```

**Example 8.1 Block Scalar Header**

| ``` - \| # Empty header↓  literal - >1 # Indentation indicator↓  ·folded - \|+ # Chomping indicator↓  keep  - >1- # Both indicators↓  ·strip ``` | ```json [ "literal\n",   " folded\n",   "keep\n\n",   " strip" ] ``` |
| --- | --- | --- | --- |

## 8.1.1.1. Block Indentation Indicator

Every block scalar has a *content indentation level*. The content of the block scalar excludes a number of leading [spaces](https://yaml.org/spec/1.2.2/#white-space-characters) on each line up to the content indentation level.

If a block scalar has an *indentation indicator*, then the content indentation level of the block scalar is equal to the indentation level of the block scalar plus the integer value of the indentation indicator character.

If no indentation indicator is given, then the content indentation level is equal to the number of leading [spaces](https://yaml.org/spec/1.2.2/#white-space-characters) on the first non- [empty line](https://yaml.org/spec/1.2.2/#empty-lines) of the contents. If there is no non- [empty line](https://yaml.org/spec/1.2.2/#empty-lines) then the content indentation level is equal to the number of spaces on the longest line.

It is an error if any non- [empty line](https://yaml.org/spec/1.2.2/#empty-lines) does not begin with a number of spaces greater than or equal to the content indentation level.

It is an error for any of the leading [empty lines](https://yaml.org/spec/1.2.2/#empty-lines) to contain more [spaces](https://yaml.org/spec/1.2.2/#white-space-characters) than the first non- [empty line](https://yaml.org/spec/1.2.2/#empty-lines).

A YAML [processor](https://yaml.org/spec/1.2.2/#processes-and-models) should only emit an explicit indentation indicator for cases where detection will fail.

```
[163] c-indentation-indicator ::=
  [x31-x39]    # 1-9
```

**Example 8.2 Block Indentation Indicator**

| ``` - \|° ·detected - >° · ·· ··# detected - \|1 ··explicit - >° ·→ ·detected ``` | ```json [ "detected\n",   "\n\n# detected\n",   " explicit\n",   "\t\ndetected\n" ] ``` |
| --- | --- | --- | --- |

**Legend:**

- `[c-indentation-indicator](https://yaml.org/spec/1.2.2/#rule-c-indentation-indicator)`
- `[s-indent(n)](https://yaml.org/spec/1.2.2/#rule-s-indent)`

**Example 8.3 Invalid Block Scalar Indentation Indicators**

| ``` - \| ·· ·text - > ··text ·text - \|2 ·text ``` | ``` ERROR: - A leading all-space line must   not have too many spaces. - A following text line must   not be less indented. - The text is less indented   than the indicated level. ``` |
| --- | --- | --- | --- |

## 8.1.1.2. Block Chomping Indicator

*Chomping* controls how final [line breaks](https://yaml.org/spec/1.2.2/#line-break-characters) and trailing [empty lines](https://yaml.org/spec/1.2.2/#empty-lines) are interpreted. YAML provides three chomping methods:

### Strip

*Stripping* is specified by the " `-` " chomping indicator. In this case, the final [line break](https://yaml.org/spec/1.2.2/#line-break-characters) and any trailing [empty lines](https://yaml.org/spec/1.2.2/#empty-lines) are excluded from the [scalar's content](https://yaml.org/spec/1.2.2/#scalar).

### Clip

*Clipping* is the default behavior used if no explicit chomping indicator is specified. In this case, the final [line break](https://yaml.org/spec/1.2.2/#line-break-characters) character is preserved in the [scalar's content](https://yaml.org/spec/1.2.2/#scalar). However, any trailing [empty lines](https://yaml.org/spec/1.2.2/#empty-lines) are excluded from the [scalar's content](https://yaml.org/spec/1.2.2/#scalar).

### Keep

*Keeping* is specified by the " `+` " chomping indicator. In this case, the final [line break](https://yaml.org/spec/1.2.2/#line-break-characters) and any trailing [empty lines](https://yaml.org/spec/1.2.2/#empty-lines) are considered to be part of the [scalar's content](https://yaml.org/spec/1.2.2/#scalar). These additional lines are not subject to [folding](https://yaml.org/spec/1.2.2/#line-folding).

The chomping method used is a [presentation detail](https://yaml.org/spec/1.2.2/#presenting-the-serialization-tree) and must not be used to convey [content](https://yaml.org/spec/1.2.2/#nodes) information.

```
[164]
c-chomping-indicator(STRIP) ::= '-'
c-chomping-indicator(KEEP)  ::= '+'
c-chomping-indicator(CLIP)  ::= ""
```

The interpretation of the final [line break](https://yaml.org/spec/1.2.2/#line-break-characters) of a [block scalar](https://yaml.org/spec/1.2.2/#block-scalar-styles) is controlled by the chomping indicator specified in the [block scalar header](https://yaml.org/spec/1.2.2/#block-scalar-headers).

```
[165]
b-chomped-last(STRIP) ::= b-non-content  | <end-of-input>
b-chomped-last(CLIP)  ::= b-as-line-feed | <end-of-input>
b-chomped-last(KEEP)  ::= b-as-line-feed | <end-of-input>
```

**Example 8.4 Chomping Final Line Break**

| ``` strip: \|-   text↓ clip: \|   text↓ keep: \|+   text↓ ``` | ```json { "strip": "text",   "clip": "text\n",   "keep": "text\n" } ``` |
| --- | --- | --- | --- | --- |

**Legend:**

- `[b-non-content](https://yaml.org/spec/1.2.2/#rule-b-non-content)`
- `[b-as-line-feed](https://yaml.org/spec/1.2.2/#rule-b-as-line-feed)`

The interpretation of the trailing [empty lines](https://yaml.org/spec/1.2.2/#empty-lines) following a [block scalar](https://yaml.org/spec/1.2.2/#block-scalar-styles) is also controlled by the chomping indicator specified in the [block scalar header](https://yaml.org/spec/1.2.2/#block-scalar-headers).

```
[166]
l-chomped-empty(n,STRIP) ::= l-strip-empty(n)
l-chomped-empty(n,CLIP)  ::= l-strip-empty(n)
l-chomped-empty(n,KEEP)  ::= l-keep-empty(n)
```
```
[167] l-strip-empty(n) ::=
  (
    s-indent-less-or-equal(n)
    b-non-content
  )*
  l-trail-comments(n)?
```
```
[168] l-keep-empty(n) ::=
  l-empty(n,BLOCK-IN)*
  l-trail-comments(n)?
```

Explicit [comment](https://yaml.org/spec/1.2.2/#comments) lines may follow the trailing [empty lines](https://yaml.org/spec/1.2.2/#empty-lines). To prevent ambiguity, the first such [comment](https://yaml.org/spec/1.2.2/#comments) line must be less [indented](https://yaml.org/spec/1.2.2/#indentation-spaces) than the [block scalar content](https://yaml.org/spec/1.2.2/#block-scalar-styles). Additional [comment](https://yaml.org/spec/1.2.2/#comments) lines, if any, are not so restricted. This is the only case where the [indentation](https://yaml.org/spec/1.2.2/#indentation-spaces) of [comment](https://yaml.org/spec/1.2.2/#comments) lines is constrained.

```
[169] l-trail-comments(n) ::=
  s-indent-less-than(n)
  c-nb-comment-text
  b-comment
  l-comment*
```

**Example 8.5 Chomping Trailing Lines**

| ``` # Strip   # Comments: strip: \|-   # text↓ ··⇓ ·# Clip ··# comments: ↓ clip: \|   # text↓ ·↓ ·# Keep ··# comments: ↓ keep: \|+   # text↓ ↓ ·# Trail ··# comments. ``` | ```json { "strip": "# text",   "clip": "# text\n",   "keep": "# text\n\n" } ``` |
| --- | --- | --- | --- | --- |

If a [block scalar](https://yaml.org/spec/1.2.2/#block-scalar-styles) consists only of [empty lines](https://yaml.org/spec/1.2.2/#empty-lines), then these lines are considered as trailing lines and hence are affected by chomping.

**Example 8.6 Empty Scalar Chomping**

| ``` strip: >- ↓ clip: > ↓ keep: \|+ ↓ ``` | ```json { "strip": "",   "clip": "",   "keep": "\n" } ``` |
| --- | --- | --- |

**Legend:**

- `[l-strip-empty(n)](https://yaml.org/spec/1.2.2/#rule-l-strip-empty)`
- `[l-keep-empty(n)](https://yaml.org/spec/1.2.2/#rule-l-keep-empty)`