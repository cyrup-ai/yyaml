# 5.1. Character Set

To ensure readability, YAML [streams](https://yaml.org/spec/1.2.2/#streams) use only the *printable* subset of the Unicode character set. The allowed character range explicitly excludes the C0 control block [^15] `x00-x1F` (except for TAB `x09`, LF `x0A` and CR `x0D` which are allowed), DEL `x7F`, the C1 control block `x80-x9F` (except for NEL `x85` which is allowed), the surrogate block [^16] `xD800-xDFFF`, `xFFFE` and `xFFFF`.

On input, a YAML [processor](https://yaml.org/spec/1.2.2/#processes-and-models) must accept all characters in this printable subset.

**Test Coverage**: [test_accept_all_printable_characters_*](../../tests/rfc_compliance/ch05_character_productions/test_5_1_character_set.rs)

On output, a YAML [processor](https://yaml.org/spec/1.2.2/#processes-and-models) must only produce only characters in this printable subset. Characters outside this set must be [presented](https://yaml.org/spec/1.2.2/#presenting-the-serialization-tree) using [escape](https://yaml.org/spec/1.2.2/#escaped-characters) sequences. In addition, any allowed characters known to be non-printable should also be [escaped](https://yaml.org/spec/1.2.2/#escaped-characters).

**Test Coverage**: [test_non_printable_characters_escaped_on_output](../../tests/rfc_compliance/ch05_character_productions/test_5_1_character_set.rs)

> Note: This isn't mandatory since a full implementation would require extensive character property tables.

```
[1] c-printable ::=
                         # 8 bit
    x09                  # Tab (\t)
  | x0A                  # Line feed (LF \n)
  | x0D                  # Carriage Return (CR \r)
  | [x20-x7E]            # Printable ASCII
                         # 16 bit
  | x85                  # Next Line (NEL)
  | [xA0-xD7FF]          # Basic Multilingual Plane (BMP)
  | [xE000-xFFFD]        # Additional Unicode Areas
  | [x010000-x10FFFF]    # 32 bit
```

To ensure [JSON compatibility](https://yaml.org/spec/1.2.2/#yaml-directives), YAML [processors](https://yaml.org/spec/1.2.2/#processes-and-models) must allow all non-C0 characters inside [quoted scalars](https://yaml.org/spec/1.2.2/#double-quoted-style). To ensure readability, non-printable characters should be [escaped](https://yaml.org/spec/1.2.2/#escaped-characters) on output, even inside such [scalars](https://yaml.org/spec/1.2.2/#scalars).

**Test Coverage**: [test_allow_non_c0_characters_in_quoted_scalars](../../tests/rfc_compliance/ch05_character_productions/test_5_1_character_set.rs)

> Note: JSON [quoted scalars](https://yaml.org/spec/1.2.2/#double-quoted-style) cannot span multiple lines or contain [tabs](https://yaml.org/spec/1.2.2/#white-space-characters), but YAML [quoted scalars](https://yaml.org/spec/1.2.2/#double-quoted-style) can.

```
[2] nb-json ::=
    x09              # Tab character
  | [x20-x10FFFF]    # Non-C0-control characters
```

> Note: The production name `nb-json` means "non-break JSON compatible" here.