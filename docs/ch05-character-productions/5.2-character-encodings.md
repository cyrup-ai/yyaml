# 5.2. Character Encodings

All characters mentioned in this specification are Unicode code points. Each such code point is written as one or more bytes depending on the *character encoding* used. Note that in UTF-16, characters above `xFFFF` are written as four bytes, using a surrogate pair.

The character encoding is a [presentation detail](https://yaml.org/spec/1.2.2/#presenting-the-serialization-tree) and must not be used to convey [content](https://yaml.org/spec/1.2.2/#nodes) information.

On input, a YAML [processor](https://yaml.org/spec/1.2.2/#processes-and-models) must support the UTF-8 and UTF-16 character encodings. For [JSON compatibility](https://yaml.org/spec/1.2.2/#yaml-directives), the UTF-32 encodings must also be supported.

If a character [stream](https://yaml.org/spec/1.2.2/#streams) begins with a *byte order mark*, the character encoding will be taken to be as indicated by the byte order mark. Otherwise, the [stream](https://yaml.org/spec/1.2.2/#streams) must begin with an ASCII character. This allows the encoding to be deduced by the pattern of null (`x00`) characters.

Byte order marks may appear at the start of any [document](https://yaml.org/spec/1.2.2/#documents), however all [documents](https://yaml.org/spec/1.2.2/#documents) in the same [stream](https://yaml.org/spec/1.2.2/#streams) must use the same character encoding.

To allow for [JSON compatibility](https://yaml.org/spec/1.2.2/#yaml-directives), byte order marks are also allowed inside [quoted scalars](https://yaml.org/spec/1.2.2/#double-quoted-style). For readability, such [content](https://yaml.org/spec/1.2.2/#nodes) byte order marks should be [escaped](https://yaml.org/spec/1.2.2/#escaped-characters) on output.

The encoding can therefore be deduced by matching the first few bytes of the [stream](https://yaml.org/spec/1.2.2/#streams) with the following table rows (in order):

|  | Byte0 | Byte1 | Byte2 | Byte3 | Encoding |
| --- | --- | --- | --- | --- | --- |
| Explicit BOM | x00 | x00 | xFE | xFF | UTF-32BE |
| ASCII first character | x00 | x00 | x00 | any | UTF-32BE |
| Explicit BOM | xFF | xFE | x00 | x00 | UTF-32LE |
| ASCII first character | any | x00 | x00 | x00 | UTF-32LE |
| Explicit BOM | xFE | xFF |  |  | UTF-16BE |
| ASCII first character | x00 | any |  |  | UTF-16BE |
| Explicit BOM | xFF | xFE |  |  | UTF-16LE |
| ASCII first character | any | x00 |  |  | UTF-16LE |
| Explicit BOM | xEF | xBB | xBF |  | UTF-8 |
| Default |  |  |  |  | UTF-8 |

The recommended output encoding is UTF-8. If another encoding is used, it is recommended that an explicit byte order mark be used, even if the first [stream](https://yaml.org/spec/1.2.2/#streams) character is ASCII.

For more information about the byte order mark and the Unicode character encoding schemes see the Unicode FAQ [^17].

```
[3] c-byte-order-mark ::= xFEFF
```

In the examples, byte order mark characters are displayed as " `⇔` ".

**Example 5.2 Invalid Byte Order Mark**

| ``` - Invalid use of BOM ⇔ - Inside a document. ``` | ``` ERROR:  A BOM must not appear  inside a document. ``` |
| --- | --- |